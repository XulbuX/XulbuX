<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banner Maker</title>
  <link rel="stylesheet" href="https://use.typekit.net/tne4lpa.css">
</head>

<body>
  <header>
    <h1 class="header-title">
      Banner Maker
    </h1>
    <button id="dl-btn" type="button">
      <img src="assets/img/btn_dl.svg" alt="Download Icon" />
      Export Banner
    </button>
  </header>
  <main>
    <div class="input-section">
      <div class="input-group" title="Banner Text">
        <label for="input-txt">
          <img src="assets/img/input_txt.svg" als="Text Icon" />
        </label>
        <input id="input-txt" type="text" placeholder="Banner Text" />
      </div>
      <div class="input-group" title="Text Tint Color">
        <label for="input-txt-tint">
          <img src="assets/img/input_tint.svg" als="Tint Icon" />
        </label>
        <input id="input-txt-tint" type="color" />
      </div>
      <div class="input-group" title="Banner Image">
        <label for="input-img">
          <img src="assets/img/input_img.svg" als="Image Icon" />
        </label>
        <input id="input-img" type="file" accept="image/*" />
      </div>
    </div>
    <div class="banner-preview">
      <img id="preview-img" alt="Banner Image">
      <svg class="overlay-svg">
        <defs>
          <clipPath id="txt-clip-path">
            <text
              x="50%"
              y="50%"
              text-anchor="middle"
              dominant-baseline="middle" 
              font-family="interstate, sans-serif"
              font-weight="900"
              font-size="48px" />
          </clipPath>
          <filter id="blur-filter">
            <feGaussianBlur in="SourceGraphic" stdDeviation="10" />
          </filter>
        </defs>
        <image
          id="blurred-overlay"
          width="100%"
          height="100%"
          filter="url(#blur-filter)"
          clip-path="url(#txt-clip-path)" />
      </svg>
      <svg class="overlay-svg">
        <text
          id="tint-overlay"
          x="50%"
          y="50%"
          text-anchor="middle"
          dominant-baseline="middle" 
          font-family="interstate, sans-serif"
          font-weight="900"
          font-size="48px"
          fill="white"
          opacity="0.3" />
      </svg>
    </div>
  </main>

  <style>
    :root {
      --app-font: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      --red-50:#FEF2F2; --red-100:#FEE2E2; --red-200:#FECACA; --red-300:#FCA5A5; --red-400:#F87171; --red-500:#EF4444; --red-600:#DC2626; --red-700:#B91C1C; --red-800:#991B1B; --red-900:#7F1D1D; --red-950:#450A0A;
      --gray-50:#FAFAFA; --gray-100:#F5F5F5; --gray-200:#E5E5E5; --gray-300:#D4D4D4; --gray-400:#A3A3A3; --gray-500:#737373; --gray-600:#525252; --gray-700:#404040; --gray-800:#262626; --gray-900:#171717; --gray-950:#0A0A0A;
      --border-1-color: color-mix(in srgb, var(--red-500) 40%, transparent);
      --border-2-color: color-mix(in srgb, var(--gray-500) 60%, transparent);
      --btn-1-bg-color: color-mix(in srgb, var(--red-500) 60%, transparent);
      --btn-1-bg-hover-color: color-mix(in srgb, var(--red-500) 70%, transparent);
      --btn-2-bg-color: color-mix(in srgb, var(--gray-700) 60%, transparent);
      --btn-2-bg-hover-color: color-mix(in srgb, var(--gray-700) 70%, transparent);
    }

    * { box-sizing: border-box }

    body {
      margin: 0; padding: 0;
      font-size: 1rem;
      font-family: var(--app-font);
      color: var(--gray-100);
      background-color: var(--gray-950);
    }

    header {
      width: 100%;
      padding: 16px 24px;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 0 0 0.5px var(--border-2-color);
    }

    main {
      margin: 40px auto;
      max-width: 1200px;
      padding: 0 24px;
    }

    button {
      gap: 8px;
      padding: 5px 9px;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      font-weight: 500;
      font-family: inherit;
      color: var(--gray-100);
      border: 1px solid var(--gray-700);
      background-color: var(--btn-2-bg-color);
      transition: background-color 200ms ease;
    }
    button:hover { background-color: var(--btn-2-bg-hover-color) }
    button:active { background-color: var(--gray-700) }

    input {
      border: none;
      width: 100%;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 0.875rem;
      font-family: var(--app-font);
      color: var(--gray-100);
      caret-color: var(--gray-100);
      box-shadow: 0 0 0 0.5px var(--border-2-color);
      background-color: var(--gray-950);
      transition: box-shadow 200ms ease;
    }
    input::placeholder { color: var(--gray-500) }
    input:focus {
      outline: none;
      box-shadow: 0 0 0 1.5px var(--red-500);
    }

    input[type="color"] {
      cursor: pointer;
      height: 40px;
      padding: 4px;
    }
    input[type="color"]::-webkit-color-swatch-wrapper { padding: 0 }
    input[type="color"]::-webkit-color-swatch {
      border: none;
      border-radius: 4px;
    }

    input[type="file"] {
      cursor: pointer;
      padding: 8px;
      font-size: 0.875rem;
      color: var(--gray-300);
    }
    input[type="file"]::file-selector-button {
      cursor: pointer;
      padding: 5px 9px;
      margin-right: 14px;
      border-radius: 6px;
      font-weight: 500;
      font-family: inherit;
      color: var(--gray-100);
      border: 1px solid color-mix(in srgb, var(--border-2-color) 60%, transparent);
      background-color: var(--btn-2-bg-color);
      transition: background-color 200ms ease;
    }
    input[type="file"]::file-selector-button:hover { background-color: var(--btn-2-bg-hover-color) }

    #dl-btn {
      gap: 10px;
      padding: 7px 12px;
      font-size: 1rem;
      border: 1px solid color-mix(in srgb, var(--border-1-color) 60%, transparent);
      background-color: var(--btn-1-bg-color);

      img {
        width: 16px;
        height: 16px;
        filter: brightness(0) invert(1);
      }
    }
    #dl-btn:hover { background-color: var(--btn-1-bg-hover-color) }
    #dl-btn:active { background-color: var(--btn-1-bg-color) }
    #dl-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    #preview-img {
      width: 100%;
      height: 100%;
      display: none;
      object-fit: cover;
    }
    #preview-img.loaded { display: block }

    #blurred-overlay {
      display: none;
      opacity: 0.6;
    }
    #blurred-overlay.visible { display: block }

    #tint-overlay { display: none }
    #tint-overlay.visible { display: block }

    .header-title {
      margin: 0;
      font-size: 2rem;
      font-weight: 700;
      font-family: "interstate", sans-serif;
      font-style: italic;
    }

    .input-section {
      gap: 16px;
      margin-bottom: 40px;
      display: flex;
      flex-direction: column;

      .input-group {
        gap: 12px;
        display: flex;
        flex-direction: row;
        align-items: center;

        label {
          width: 20px;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;

          img {
            height: 20px;
            filter: brightness(0) invert(40%);
          }
        }
      }
    }

    .banner-preview {
      margin: 0 auto;
      width: 100%;
      height: 320px;
      max-width: 1280px;
      border-radius: 12px;
      overflow: clip;
      position: relative;
      box-shadow: 0 0 0 0.5px var(--border-2-color);
      background-color: var(--gray-900);
    }

    .overlay-svg {
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      position: absolute;
      pointer-events: none;
    }

    .banner-preview.empty::after {
      content: 'Upload an image to get started';
      top: 50%;
      left: 50%;
      position: absolute;
      font-size: 1.125rem;
      font-style: italic;
      color: var(--gray-500);
      transform: translate(-50%, -50%);
    }
  </style>

  <script>
    const initTxt = 'Sample Banner Text';
    const initTint = '#FFFFFF';
    const initImg = 'assets/img/banner_img_sample.jpg';

    const txtInput = document.getElementById('input-txt');
    const tintInput = document.getElementById('input-txt-tint');
    const imgInput = document.getElementById('input-img');
    const previewImg = document.getElementById('preview-img');
    const blurredOverlay = document.getElementById('blurred-overlay');
    const tintOverlay = document.getElementById('tint-overlay');
    const svgTxt = document.querySelector('#txt-clip-path text');

    let currentImage = null;

    function setInitValues() {
      txtInput.value = initTxt;
      tintInput.value = initTint;
      svgTxt.textContent = initTxt;
      tintOverlay.textContent = initTxt;
      tintOverlay.setAttribute('fill', initTint);

      fetch(initImg)
        .then(response => response.blob())
        .then(blob => {
          const reader = new FileReader();
          reader.onload = (event) => {
            currentImage = event.target.result;
            previewImg.src = currentImage;
            blurredOverlay.setAttribute('href', currentImage);
            previewImg.classList.add('loaded');
            blurredOverlay.classList.add('visible');
            tintOverlay.classList.add('visible');
          };
          reader.readAsDataURL(blob);
        })
        .catch(err => console.warn('Could not load sample image:', err));
    }

    setInitValues();

    // UPDATE TEXT CONTENT
    txtInput.addEventListener('input', (e) => {
      const text = e.target.value.trim();
      if (text) {
        svgTxt.textContent = text;
        tintOverlay.textContent = text;
        blurredOverlay.classList.add('visible');
        tintOverlay.classList.add('visible');
      } else {
        blurredOverlay.classList.remove('visible');
        tintOverlay.classList.remove('visible');
      }
    });

    // UPDATE TEXT TINT COLOR
    tintInput.addEventListener('input', (e) => {
      tintOverlay.setAttribute('fill', e.target.value);
    });

    // HANDLE IMAGE UPLOAD
    imgInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = (event) => {
          currentImage = event.target.result;
          previewImg.src = currentImage;
          blurredOverlay.setAttribute('href', currentImage);
          imgInput.value = currentImage;
          previewImg.classList.add('loaded');
          blurredOverlay.classList.add('visible');
          tintOverlay.classList.add('visible');
          document.querySelector('.banner-preview').classList.remove('empty');
        };
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>

</html>
